{
    "componentChunkName": "component---src-templates-blog-template-blog-template-tsx",
    "path": "/blog/2021-02-13-cleaning-up-my-mac/",
    "result": {"data":{"markdownRemark":{"html":"<blockquote>\n<p>TLDR;</p>\n<ol>\n<li>Use <em>System Information</em> and <code class=\"language-text\">du</code> to get an idea of what is taking up your space.</li>\n<li>If you have JavaScript project with huge <code class=\"language-text\">node_modules</code> that you don’t need anymore, remove them.</li>\n<li>Check your <code class=\"language-text\">~/Library/Application Support/MobileSync/Backup</code>. If you backup your iPhone somewhere else (like iCloud), this can go away.</li>\n<li>Remove any IDE/sdk/tools that you don’t need any more. For me, it was Android Studio and Android SDK.</li>\n<li>Check your Docker to see if there are containers/volumes/images that you can remove.</li>\n</ol>\n</blockquote>\n<p>I got my current MacBook Pro in 2017. It is meant to be my college workbench\nfor my computer science classes. It has served me well with its 500 GB hard\ndisk. However, in 2021, my disk space only has 90 GB left. There is still\nquite some space. But the worry comes from the trend of stable growth. Over\nthe 3.5 years I had the machine, I used up 410 GB of disk space, which\naverages to 117 GBs per year. That means my hard disk won’t last me through\nanother year! This is a sign for me to do something.</p>\n<p>This article records how I reclaimed some disk space in my Mac.</p>\n<h2 id=\"media-and-code-takes-up-space-but-not-that-much\" style=\"position:relative;\"><a href=\"#media-and-code-takes-up-space-but-not-that-much\" aria-label=\"media and code takes up space but not that much permalink\" class=\"gatsby-remark-autolink-headers-a-tags before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Media and code takes up space, but not that much…</h2>\n<p>I start thinking back what can possibly takes up so much space on my laptop.\nTwo of my biggest sources of disk space consumption are media and code.</p>\n<p>I used to take pictures quite regularly and the RAW files take up a lot of\nspace indeed. After importing them into Adobe LightRoom they generate a\nseparate DNG, taking up almost twice as much space. But since the pandemic, I\nhaven’t really taken much pictures any more. A quick inspection of my picture\nfolders showed that it didn’t take up more than a few GB of spaces. Another\nsource is all the videos I download, for watching with my friend or when I am\ntravelling on the plane or train. They usually get stored in the Downloads\ndirectory. And I remove them quickly after I finish watching them. So Media\nshouldn’t really take up much space.</p>\n<p>I program in JavaScript a lot. I did React, Gatsby, React Native, Electron\nprojects. All of them have pretty heavy <code class=\"language-text\">node_modules</code> folder. So they might\nalso be taking up some space as well. I deleted all of the JavaScript project\nthat has been uploaded to GitHub, only keeping the ones that I actively work\non. Yes, I got to reclaim may be 1-2 GB of space but not much from that.</p>\n<p>I don’t generate much media data and code. They don’t take up too much space\nas well. Where is all my disk space?</p>\n<p>I need a map to see where my space ended up being used.</p>\n<h2 id=\"exploring-disk-space\" style=\"position:relative;\"><a href=\"#exploring-disk-space\" aria-label=\"exploring disk space permalink\" class=\"gatsby-remark-autolink-headers-a-tags before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exploring disk space</h2>\n<p>OS X comes with built in map for us to see disk use distribution. Click the\nApple Logo on the top left, click <em>About This Mac</em>, choose the <em>Storage</em> pane\nand click <em>Manage</em>. This takes us to a handy manager that calculate our disk\ndistribution.</p>\n<figure align=center>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 640px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6b662f33533532cede8f299a3f0fd573/de9fe/storage-manager.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACQElEQVQ4y6WT3WoTQRTHR0G9EAR9Ca/VV/IRvOoKPkgQvFAstCE39UJQFCmV+JU0ye7Ox2Y3m0myH5OZSUybi3Y3R862iRUrFFz4MbPLOf/zn3NmCSGEvHu//7jxlT57+22y9eaLdOQ4cRZGOdZaZzabOUIIhzHmcM4d13UdSqnjeZ6TJImjtd7SWj/N8/zJwcHBPdS7sf1xMHzxKYNX+wqef1AgUw2J+QlxPIQoiiBJkoo0TTf7yWQCWmswxlTrdDqFvb29hyh4q+sHLqUUZByeBNwvMqWKkV0WrusVjLEiDMMiCIIiiqIKfBdCFGmaFlrr0+l0ulJKLXZ2dh6sBelh1wUhRMkYX2VZtpqMZbUixpjVfD5fzWazv7DWlvP5HJRSy3q9fiZ46ArqUQ7DOC455zAajeDl623o9XrQ7XaxEIzH4wo86nqPLdBar/C4xpjlxuH3nqCdng9hPyjx6HmeV33JsqxKWvfLWnsZ6PRPhx0/oEE4ACll2e/3K6HxaASMMeh0OuB5HgyHw42zNTgQFDwfzG+HlAsaRQOI47hEEaUU2LOqlVt0gFzZoRCCSinRRTkYDKorgMGu60K73YYwDKu+XnSH8VgQB3beouXu7u5G0MMEKeWJlLJQShXW2iLP8yLLsgpjTPXtEk7PHS42glEUxRcvLbo7OjracHx8DIvF4p9gDOY0Go1HKHiz2WzWW62W/+PsaXue1+actxljV6HFOe/4vv+5VqvdR8FrhJDbhBD8D+/+B3cIIdd/AbPtJPCFgH8GAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Storage Manager Window\"\n        title=\"Storage Manager Window\"\n        src=\"/static/6b662f33533532cede8f299a3f0fd573/6af66/storage-manager.png\"\n        srcset=\"/static/6b662f33533532cede8f299a3f0fd573/69538/storage-manager.png 160w,\n/static/6b662f33533532cede8f299a3f0fd573/72799/storage-manager.png 320w,\n/static/6b662f33533532cede8f299a3f0fd573/6af66/storage-manager.png 640w,\n/static/6b662f33533532cede8f299a3f0fd573/d9199/storage-manager.png 960w,\n/static/6b662f33533532cede8f299a3f0fd573/21b4d/storage-manager.png 1280w,\n/static/6b662f33533532cede8f299a3f0fd573/de9fe/storage-manager.png 2146w\"\n        sizes=\"(max-width: 640px) 100vw, 640px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>\n<p><em>The built-in storage manager. This is after I cleaned up my storage space.</em></p>\n</figcaption>\n</figure>\n<p>If you click on each category, it shows up the largest documents in that\ncategory. My largest category is <em>Documents</em>. It comes from my giant textbook\npdf for my math classes, giant zip file containing training data for my\ncomputer vision projects. I can do some cleaning on this end.</p>\n<p>However, the most annoying one is the category called <em>Other</em>. I can’t click\non it. I don’t possibly know what files there are that is taking up so much\nspace. From the screenshot, it is taking up 108 GB of space but before\ncleaning up it took up almost 200 GB! It was such a frustration. The good\nnews is that I am writing this article right now and you see that I managed\nto chop the size in half. Let me show you how.</p>\n<p>We need another way to figure out where our spaces went. A handy command\ncalled <code class=\"language-text\">du</code> could be of help here. My idea is to start at my home directory\n<code class=\"language-text\">~</code>, and see which folder is taking the most space. Then I recursively goes\ninto the folder to check what is taking up much space.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">du</span> -sh * <span class=\"token operator\">|</span> <span class=\"token function\">sort</span> -h</code></pre></div>\n<p><code class=\"language-text\">du -sh *</code> means print out disk usage in a human readable format (flag <code class=\"language-text\">-h</code>)\nfor the each entry specified (flag <code class=\"language-text\">-s</code>). The entries are the wildcard <code class=\"language-text\">*</code>\nsince I want to audit all directories in my home directory.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"> 26M\tApplications\n 82M\tMovies\n789M\tDownloads\n906M\tDesktop\n1.0G\tgo\n5.4G\tCode\n5.8G\tMusic\n6.0G\tPictures\n7.4G\tbin\n 55G\tDocuments\n107G\tLibrary</code></pre></div>\n<p>I realize that the path <code class=\"language-text\">~/Library</code> is taking up a lot of spaces. So I went into it\nand checked where all my disk space went.</p>\n<p>There is a folder called <code class=\"language-text\">~/Library/Application Support/MobileSync/Backup</code>\nthat is taking up 10G. It is for backing up by iOS device (my iPhone).\nHowever, I already back up the most important data on my phone and I don’t\nneed this anymore. Therefore, I simply removed it.</p>\n<p>Then, the folder called <code class=\"language-text\">~/Library/Android/</code> also takes up 7 GB. This stores\nmy Android development sdk. I know why this is here. I have taught an Android\ndevelopment workshop series called <a href=\"https://github.com/uclaacm/hack-sprint-w20\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Hack\nSprint</a>. I had to install Android\nStudio and install the Android development sdk. I do not do Android\ndevelopment anymore so I don’t need it. It is time for them to go away. By\nremoving Android Studio and the Android sdk in the Library. It freed a good 9\nGB of space. That reminds me of my cocoapod that I installed when I was\ntoying with iOS development. Time for <code class=\"language-text\">~/.cocoapod</code> to go as well (it also\ntakes up a few GB).</p>\n<p>Undergraduate is truly when I get to learn and explore so many different\ntechnologies. React Native, Electron, Android, iOS development, PHP and stuff\n(you can’t really tell that I am a frontend person here). However, at the end\nof the day, I don’t use all of them on a daily bases, and it is reasonable to\nlet go.</p>\n<p>While I’m here, I also cleaned up some of the <code class=\"language-text\">.plist</code> files in\n<code class=\"language-text\">~/Library/LaunchAgents</code> for the apps that I have uninstalled already. Also\nother folders in <code class=\"language-text\">~/Library</code> that belongs to app that has already been\ndeleted.</p>\n<p>Cleaning up my <code class=\"language-text\">~/Library</code> is very effective.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/92e4b928242b81cc7099f30efd25f8d9/e17e5/super-effective.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5klEQVQY042QO4uFQAyF/f+9gvhAUFB/gI1g4bOysNCraGFroYhvEfVcZha3WO4uG/jIYZIckmFM04RhGHiyrusfeWok/4S8k3lZlsG4rouu6zAMA6Zpwrqu2LYN+75T/eR5nrEsy594nvdlWBQFqqpCkiTUIE1TvF4vZFmGMAxRliX+E0EQgCGuzwZt2+I8T6r7vqfm4zjiOA6qr+vCfd8fIVf5vg/GcRzEcUy3IkRRhDzPUdc1/YamaWid9BHj38K2bViWBUZVVbAsC0VRKETzPA9JkiiCIIDjOIii+N3zCU3T6Nwb4cmfY+pvV0cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"super effective\"\n        title=\"super effective\"\n        src=\"/static/92e4b928242b81cc7099f30efd25f8d9/e17e5/super-effective.png\"\n        srcset=\"/static/92e4b928242b81cc7099f30efd25f8d9/69538/super-effective.png 160w,\n/static/92e4b928242b81cc7099f30efd25f8d9/72799/super-effective.png 320w,\n/static/92e4b928242b81cc7099f30efd25f8d9/e17e5/super-effective.png 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"docker\" style=\"position:relative;\"><a href=\"#docker\" aria-label=\"docker permalink\" class=\"gatsby-remark-autolink-headers-a-tags before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker</h2>\n<p>Lastly, it has been a while since I have used Docker in my previous\ninternships. I didn’t had the time to remove the containers and images.\nTo check my disk usage:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">docker system df</code></pre></div>\n<p>Shows that I have container and images that are taking more than 15 GB.\nI don’t need them any more so they can go.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">docker system prune -a</code></pre></div>\n<p>For some reason, this will get stuck for me. I think it happens to a lot of\nother Mac Docker user as well. Instead I manually removed them,</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">docker volume ls -q | xargs docker volume rm \ndocker container ls -q | xargs docker container rm \ndocker image ls -q | xargs docker image rm </code></pre></div>\n<p>The <code class=\"language-text\">-q</code> flag is to tell the command to output only the ID of the\nimages/containers/volumes. Then we pipe them to <code class=\"language-text\">xargs</code> to delete them one by\none.</p>\n<p>Now my laptop has 216 GB of free space. Brilliant.</p>","frontmatter":{"date":"2021-02-13","title":"Cleaning Up My Mac","subtitle":"How I freed up 100 GB of disk space"},"timeToRead":6}},"pageContext":{"slug":"/2021-02-13-cleaning-up-my-mac/","prev":{"title":"How to teach useEffect without componentDidMount","path":"/blog/2021-02-16-how-to-teach-useEffect/"},"next":{"title":"Seeing My Virtual Music Taste on Github Profile","path":"/blog/2020-08-16-youtube-mymix/"}}},
    "staticQueryHashes": ["1827841","1979163989"]}